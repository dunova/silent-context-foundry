name: Verify

on:
  push:
  pull_request:

jobs:
  syntax:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-python@v5
        with:
          python-version: '3.11'
      - name: Bash syntax
        run: |
          for f in scripts/*.sh; do bash -n "$f"; done
      - name: Python syntax
        run: python -m py_compile scripts/*.py
      - name: Secret/path scan (basic)
        run: |
          ! rg -n "AIza[0-9A-Za-z_-]{20,}|sk-[A-Za-z0-9_-]{20,}|ghp_[A-Za-z0-9]{20,}|gho_[A-Za-z0-9]{20,}" .
          ! rg -n "/Users/dunova" .
